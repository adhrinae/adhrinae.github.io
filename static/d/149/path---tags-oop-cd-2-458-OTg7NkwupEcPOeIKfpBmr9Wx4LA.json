{"pageContext":{"postsByTag":[{"excerpt":"이 글의 원문은  Michał Konarski…","html":"<ul>\n<li>이 글의 원문은 <a href=\"http://mjk.space/how-to-avoid-inheritance-in-ruby/\">Michał Konarski</a>가 작성하였습니다.</li>\n<li>번역 실수 및 용어 사용의 지적 등은 언제나 환영합니다.</li>\n</ul>\n<hr>\n<p>상속이 왜 문제가 될까요? 예를 하나 들어드리겠습니다.</p>\n<p>여러분의 고객이 '교통 상황 시뮬레이터'를 만들어달라고 요청했다고 해보죠. 고객은 몇몇 자동차가 움직이는 모습을 실험해보고 싶어합니다. 만약 루비같은 객체지향 언어를 사용한다면 먼저 모든 로직과 속성을 담고 있는 모델 클래스를 떠올리게 됩니다. 이렇게요.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 136px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.73529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABlUlEQVQoz62SyU4CQRRF8bNc+AGu/BDWim4YNiQaV67QsDFqHIgyis2ktHHCCIgM3dD0wKAoIsqgkFRSz6oGGhJXJnRy0q9e7r016qJCYEY3pS/IuQZZ7tTebIhzm0Ocx0BY+Q9h3mMIcm6LI26f05KvpaipAXUQW0VQupKKTOmIE0yMhxoK9VBvmPeuaoE3MmuQ2kXIvmb6BJSppRFXz6HCR16Db3Ao3+CR0Cwg7p1TNVRLPVJbhEj+1DwOlNhlpSvDMAzn6lnM3J3hQ+YAn0SOsevCiYP3AczEGLV3X4zh3FsWUy31KN8yCfRZJleoBaZfnjBZBfiuvGBZN4NxzQj2IztYN6ywuW8D/aIeyCRANVRLPaU/gRK7JLYEIDP26VZG2yEGFFce1DpZTqh1ohRHqeojGh0N+ffEtgAR3mfSAm/lS9MnNMkhK1D5KQ/oUSrw3K+qdbU/qClV0h9plI4CX8R7nvePL8WfccyT97jDCkEbYWtEtBBQYYWAVo97ms4WLTC7zuT2ghrWRmha71pX6zR0v7xe4phLYWhMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Vehicle Class\"\n        title=\"\"\n        src=\"/static/2017-07-16-sc1-2e83a320a96db4a01c9b4553157907f6-9805c.png\"\n        srcset=\"/static/2017-07-16-sc1-2e83a320a96db4a01c9b4553157907f6-9805c.png 136w\"\n        sizes=\"(max-width: 136px) 100vw, 136px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>완성된 결과물을 고객에게 보여주었습니다. 다 괜찮았는데 이제 고객이 자동차가 '승용차' 혹은 '트럭' 으로 나뉘었으면 좋겠다고 합니다. 이런 경우 두 차종은 최소한 일부 행동을 공유하고 있있는데다, 코드를 반복해서 작성하는 것도 별로 내키지 않습니다. 문제 없어요! 상속을 활용하면 되죠! 지금 마주친 경우는 아주 적절한 '-이다(is-a)' 관계입니다. 안 될 것 있나요?</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 424px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 38.443396226415096%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAB30lEQVQoz2NgQAMn7h9mBNFH7+23OvPoRMvll+drrr29XHvpxfmaUw+PNR25u1cOLH93PyMDMeDEnaMsIPr0w+PNP/9//3/h8fn/J24d+3/j9fX/X/9//n/83iFXkPzhG/uZsRpw7P4Bhr1XtjP8//8fzAfSTCD6zJPjcWcfnrp7+PrBS8dvHTl79Mbhy2cenrx19tlxA2R1IH3bz25kOPnoMMP2K2tQzAZ5AWQrSCGLlp0sM7cQu7CilqwQSFJaWVyYW4hNSF5XHCwPVYfpygXnOtgqp2dxWLkbi1r7GAmYu+sLCEsIcAOluICYDU05B0hcTl2Kx9LTQMA52FrQKcBa5NjvNazdm8vYJu2tZmK48PTs7TMPTp44cfvomcsvLp688OzsidNPD+tAvcPYPq2F4cqbCwxrD6wE88Hh+/ho4OXnF64Cg+T4MWBwnHt05vTFp+fOHri1I4jh7/8//2++ufn/7P0z/18B4bPfT/8fu3vAAaRx68kNcC8xMjIyHLx0EMw/9eBY0c//P/7ffnfr/8lbJ/7f/3z//1sgPHxnbyFQ8uiU04+OtwNxJzBmO08+ONKx7+Y2eZBGoI3wpLHp4lIGoBow/9Cd3RbAJDTx7OMTYH1ANgh37b6+yRwAIIsHylqv15gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Vehicle with inheritance\"\n        title=\"\"\n        src=\"/static/2017-07-16-sc2-fa7f9df8054d6743399cc2574b2c80e3-11014.png\"\n        srcset=\"/static/2017-07-16-sc2-fa7f9df8054d6743399cc2574b2c80e3-20168.png 198w,\n/static/2017-07-16-sc2-fa7f9df8054d6743399cc2574b2c80e3-b3d3b.png 395w,\n/static/2017-07-16-sc2-fa7f9df8054d6743399cc2574b2c80e3-11014.png 424w\"\n        sizes=\"(max-width: 424px) 100vw, 424px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>고객은 결과물에 또 만족했지만, 또 다른 추가사항을 요구했습니다. 이 자동차들이 다른 종류의 엔진을 탑재했으면 한다고 합니다. 예를 들어 석유 엔진과 전기 엔진으로요. 다시 한번 상속을 사용해서 문제를 해결해보겠습니다!</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 562px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACUUlEQVQoz6VSS2sTURSeJhXbjVECYrXQ1C5cZNOdIiio1F1EEFy70aJVpOBGhFr9AW7agiBBMAYj2DTapHnPjJn3TCaZmbwzySSTZJz0IYIiZlG9zqRuWrLzwOXc+z0O595zIWhAvPywNGTmcM5vFzT+DSUT74zlEzq8O5xbPWZyS74XQ4O8EF6H+5lsIhCtEFYddCwAAKuJ0Ro6nvsiAapCArpKAUkTeqyOnjQ5U6ODtoWu41ZKRf7VSu4vejCmzztH55/POaP5jxNhcc3xcPGu88z01MggLVZL7t8g5chRvsNcTYpRF15BXakKfHnm+qXhg8b7T2YPYVXkClpIurAS4jI8M3A5fMTkUrUEBLEqYTEPRA29oO9qoLRdBO1eC0h6tgfLoX43SDFmwWXEsmeK2SRd2FW+10FhMw9avSYg6+hZk2OauMXssP+4ua/pE2mVebROBJ4mstEFscvfTm9hwyueZYjtYBCtpvo6uo0eljYzd+KZ6ELg8+oi32LnpR3u+N5tE4MH9V8Rq/ptsBwc9ybdkykl4oiVAjasGbMbQ5jywu6J/E967D3pHvHzntHiL27ME3/liEhrp5FayE5pSRu/jTvcwZVJWodPoWrQBglaxlfaKoIoE/nd+KEAqZt9zKucR+yIIMHHgfytAkQ9czPT5m6Vd0p9rNDNg2yHf80o5DNJEwEiwH/EtgAYhfJC6Rb9gGvQ60QFe2vkCNcir3EqdY+WiRBZxb2sQm1wLeocq5IXDcOGiTF1MmT4ZukGdoOS8bDx6U3sE9Mg5v4CEGx46+zImFIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Vehicle with even more inheritance\"\n        title=\"\"\n        src=\"/static/2017-07-16-sc3-ea0481feb5f8dca30a8d25a48403b0b1-7f0b2.png\"\n        srcset=\"/static/2017-07-16-sc3-ea0481feb5f8dca30a8d25a48403b0b1-8c8bd.png 198w,\n/static/2017-07-16-sc3-ea0481feb5f8dca30a8d25a48403b0b1-e07aa.png 395w,\n/static/2017-07-16-sc3-ea0481feb5f8dca30a8d25a48403b0b1-7f0b2.png 562w\"\n        sizes=\"(max-width: 562px) 100vw, 562px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>여러분의 고객은 '지금은' 아주 행복합니다. 하지만 또 세분화를 요구한다면 어떻게 될까요? 전용차라던가, 경찰차라던가, 소방트럭이나 앰뷸런스 등 이보다 더 많은 세분화를 요구한다면? 우리의 상속 트리는 점점 커지고 복잡해지게 됩니다. 반복되는 코드를 줄이는 대신에 결국 같은 로직을 여러군데 복사-붙여넣기 하게 될 것입니다. 심지어 <a href=\"https://en.wikipedia.org/wiki/Combinatorial_explosion\">위키피디아에도</a> 이 현상이 기재되어 있습니다.</p>\n<p>위에서 말씀드린 사례는 제가 가볍게 지어낸 경우가 아닙니다. 저는 전문 개발자로 일하면서 오래된 코드에 새로운 기능이나 행동을 추가하려 할 때마다 이런 상황을 여러 번 접했습니다. 특히 여러분이 레일즈를 사용하면서 더 자주 접하실\n수 있습니다. <code class=\"language-text\">ApplicationRecord</code> 나 <code class=\"language-text\">ApplicationController</code> 를 상속하도록 강제하는 경우가 많기 때문입니다.</p>\n<p>상속이 발생하는 코드를 예로 보여드리겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Vehicle</span>\n  <span class=\"token keyword\">def</span> run\n    refill\n    load\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Car</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Vehicle</span>\n  <span class=\"token keyword\">def</span> load\n    <span class=\"token comment\"># 승객을 싣는다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Truck</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Vehicle</span>\n  <span class=\"token keyword\">def</span> load\n    <span class=\"token comment\"># 화물을 싣는다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PetrolCar</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Car</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 연료를 채운다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ElectricCar</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Car</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 전지를 충전한다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PetrolTruck</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Truck</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 연료를 채운다 (반복되는 코드!)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ElectricTruck</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Truck</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 전지를 충전한다 (반복되는 코드!)</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>이 코드를 더 낫게 만들 수 있을까요? 가능합니다.</p>\n<h2 id=\"아마도-믹스인mixin을-쓰면\"><a href=\"#%EC%95%84%EB%A7%88%EB%8F%84-%EB%AF%B9%EC%8A%A4%EC%9D%B8mixin%EC%9D%84-%EC%93%B0%EB%A9%B4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>아마도 믹스인(Mixin)을 쓰면?</h2>\n<p>수 많은 루비 프로그래머들이 상속이 문제를 해결할 수 없다고 깨닫는 순간, 가장 먼저 떠오르는 해결책은 믹스인일 겁니다. 믹스인이 뭘까요? 기본적으로 메서드들이 정의된 모듈을 클래스에 포함하여 그 클래스의 일부로 사용하는 기법입니다. 우리는 간단히 공통된 로직을 추출하여 코드의 재사용을 피할 수 있습니다. </p>\n<p>믹스인을 사용하면 코드가 어떻게 바뀔까요? 먼저 <code class=\"language-text\">include</code> 하게 될 모듈을 만들겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">module</span> <span class=\"token constant\">Vehicle</span>\n  <span class=\"token keyword\">def</span> run\n    refill\n    load\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">module</span> <span class=\"token constant\">Truck</span>\n  <span class=\"token keyword\">def</span> load\n    <span class=\"token comment\"># 화물을 싣는다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">module</span> <span class=\"token constant\">Car</span>\n  <span class=\"token keyword\">def</span> load\n    <span class=\"token comment\"># 승객을 싣는다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">module</span> <span class=\"token constant\">ElectricEngine</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 전지를 충전한다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">module</span> <span class=\"token constant\">PetrolEngine</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 연료를 채운다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>그리고 믹스인할 대상이 되는 클래스를 만듭니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PetrolCar</span>\n  include <span class=\"token constant\">Vehicle</span>\n  include <span class=\"token constant\">Car</span>\n  include <span class=\"token constant\">PetrolEngine</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ElectricCar</span>\n  include <span class=\"token constant\">Vehicle</span>\n  include <span class=\"token constant\">Car</span>\n  include <span class=\"token constant\">ElectricEngine</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PetrolTruck</span>\n  include <span class=\"token constant\">Vehicle</span>\n  include <span class=\"token constant\">Truck</span>\n  include <span class=\"token constant\">PetrolEngine</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ElectricTruck</span>\n  include <span class=\"token constant\">Vehicle</span>\n  include <span class=\"token constant\">Truck</span>\n  include <span class=\"token constant\">ElectricEngine</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>좀 보기 좋습니다. 코드가 반복되지도 않았고, 새로운 종류의 특성을 넣어서 어떤 종류의 차량이라도 만들어낼 수 있게 되었습니다. 게다가 차량이 어떤 기능을 가지고 있는지도 눈에 잘 들어옵니다.</p>\n<p>하지만 여전히 문제가 남아있습니다. 클래스를 살펴보면 포함된 행동들이 어떻게 사용되는지 명확하지 않습니다. 믹스인으로 새로운 메서드들이 추가되었지만 이 메서드들이 무엇을 하는지, 클래스가 어떻게 메서드와 영향을 주고받는지, 실행되는 과정은 어떻게 되는지 바로 파악할 수 없습니다. 만에 하나 같은 이름을 가지고 있는 두 모듈을 가져와 사용한다면 문제가 발생하게 됩니다. 한 모듈이 다른 모듈에 있는 메서드를 '조용히' 가져와서 사용하게 되겠지요. 상속 할 클래스가 늘어나면서 생기는 문제와 비슷한 방식으로 코드가 엉망이 되기 시작합니다.</p>\n<p>믹스인은 확실히 좋은 사용처가 있기 때문에 그렇게 나쁜 방법은 아닙니다. 제 의견으로는 로깅, 인증, 유효성 검사 등 클래스의\n메타행위(meta behavior)를 정의할 때는 아주 잘 동작한다고 생각합니다. 믹스인은 코드를 깔끔하고 작은 규모로 유지할 수 있다는 명확한 장점이 있습니다. 여러분이 모듈에 정의되어 있는 구현을 믿고 있고, 서로 다른 로직을 무너뜨리지 않는 지점을 파악하고 있는 한 괜찮습니다. 기억하셔야 할 점은 이는 단지 <strong>루비가 은연중에 다중 상속을 구현하는 방법</strong>에 불과하다는 점입니다.</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"en\" dir=\"ltr\">In OOP there’s this thing to prefer composition over inheritance. And in Ruby people constantly forget that modules == multiple inheritance</p>&mdash; Piotr Solnica (@_solnic_) <a href=\"https://twitter.com/_solnic_/status/623224611212251136\">July 20, 2015</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n<p>이 문제를 개선할 수 있을까요? Yes, we can!</p>\n<h2 id=\"조합\"><a href=\"#%EC%A1%B0%ED%95%A9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조합</h2>\n<p>조합은 저도 오래전에 알고 있었지만 최근에야 사용하기 시작한 용어입니다. 단지 조합을 충분히 편하게 사용할만큼 좋다는 <em>느낌을 받지 못했습니다.</em> 그러던 어느 날 Sandi Metz의 <a href=\"https://www.youtube.com/watch?v=OMPfEXIlTVE\">'Nothing is Something'</a> 이라는 아주 환상적인 발표를 보게 되었습니다. 다른 것 보다 그녀는 조합에 대해 이야기하면서 제가 예를 들었던 문제(교통 상황 시뮬레이터)를 풀어냈습니다.</p>\n<p>조합은 어떤 방식으로 동작할까요? 클래스 사이에 <strong>같은</strong> 행위를 공유하려 하기보다, 어떤 요소가 <strong>다른</strong>지 알아낸 뒤에 이름을 붙이고, 개별 클래스로 추출해낸 뒤에 마지막에 하나의 객체로 합치는 방식으로  동작하게 됩니다.</p>\n<p>상속이 '-이다(is-a)' 관계를 나타낸다면 조합은 '-를 가지고 있다(has-a)' 관계를 나타냅니다. 그러므로 조합을 활용하기 위해서 문제의 구조를 바꾸어야 합니다. 우리의 차량은 더 이상 전기자동차가 아니라, 전기 엔진을 가진 자동차 입니다(Our vehicle <strong>is not</strong> an electric vehicle anymore but rather it <strong>has</strong> an electric engine). 트럭은 그냥 트럭이 아니고 자동차가 트럭의 몸체를 가진 것입니다(It <strong>is not</strong> a truck but it <strong>has</strong> a truck body). 이렇게 우리는 두 가지 개념을 잡아냈습니다. 바로 <strong>엔진</strong> 과 <strong>몸체</strong> 입니다.</p>\n<p>우리의 애플리케이션은 이제 아래와 같은 모습이 되었습니다. 엔진과 몸체 컨셉을 구현한 뒤에 <code class=\"language-text\">Vehicle</code> 클래스 안에 엔진과 몸체가 들어갈 자리를 마련했습니다.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 373px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.67560321715818%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADhElEQVQ4y5WU34sbVRTHJ10CEfwPBNEHX8UX8UVsUV9EQQVXiw9aLOiT0LqwYhfUsrD1qSLaBREfLNqyKD5I3UXbJrv5NZlkJpP5sROT+T2ZH8nm90w26e4kc7x3dIW+CL1w+N5zBj5z7nfOXIJ4gAUAsVaUybLchdVmFy7IPbiI9hfq3uLjDN9/mrhOfrV0o3ztoZ+oa6kt5tsUHdxJ1e7tpu5av6R+JL9J3Sxvpm6UN9Hz75ZOwFUt4OrOEdCNXhyVv7rQngGU5ck6UdJz51ibtmtOla/ZjFTWShKlkhJtliVUwyGiul7QMq+dAGv69FdK6oxytVYry1puuqK2qvLQLzWCDwnaolY7URsavQbIgyak2TTskNuQFbKgjVVo9hvgHNlAGYXzGHZ+42wiX/c/EF24iuKK6MEXUgc2uNbiy+2yd4aoWORHxqEOYps/Er3aXPBqC8HFwS5wjurHyrCJgPl3T3wsiO09UnQgX7PCXVpb7FX1Y8EIgJKDVdzhijnVQbBb4b4ziCRvAPX2CCR3AKI9iHjbmKu+jDs8h4HLCEhKPYpVx1DgHaDqXcjQGoitGRTr4zWCaVErxqGKAKOw4UJ0m5Th910RcqwDygFEgt2Zq2PcYTEGfr+9eaqszp5SR/C8MoDTzT6cQfvTch9e+JM5eDTu0DhEb7DbYd2dRqzWBVpuA2+iTlEu2DbqEAML8ZH3O/zS/84WbZVWrKkBgseHvMtFSCEOlwecix4/18bKfx6KHXbp4eeuLD22/EPyxbVK8qXLXPKJt28mU89uJB9/ffNUDIw9dNQQdRPtew40ugeAFfkaCY58n4fEI0SC1afXRWumsJrPs6ovCuaUk5xjPS8N3yMY6x8PRbsfotNGBd6NbmX4iFX8SI09bN/nIV6SG0rDBUBRcCBbNdBwdwGvUsO/jD/KReyRaPdmcgdCTvfDHBoHrDgXbO9ec1DHwHcw7OXPzibKcrAuWEe/ccZsC+nPNWO6xZmzW7tC/1WiYpJrIxiAOjZAnzhgTT00yF0wkeqBA1pgQg8OAP1R72PgK2tvJaim/zWt+EVGDe6WG6MMrQR3kA1Umuu9SeTV9DMIus60yE/oVvESbRUuVcx8rAzOcd0qfZ6Vbz95cuS6O5ecCQDT7OHhRmECSoHRZp8SD3bbmIl/b5urvDXbY1R/h9UmfzDKeIczDnNZcfjG37JmJTRNQVyIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Composition in action\"\n        title=\"\"\n        src=\"/static/2017-07-16-sc4-b6caad80a0028f7518410ecd07b25a64-a1aef.png\"\n        srcset=\"/static/2017-07-16-sc4-b6caad80a0028f7518410ecd07b25a64-c12ac.png 198w,\n/static/2017-07-16-sc4-b6caad80a0028f7518410ecd07b25a64-a1aef.png 373w\"\n        sizes=\"(max-width: 373px) 100vw, 373px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>실제 코드는 어떻게 될까요? 핵심 클래스부터 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Vehicle</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">:</span><span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@engine</span> <span class=\"token operator\">=</span> engine\n    <span class=\"token variable\">@body</span> <span class=\"token operator\">=</span> body\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> run\n    <span class=\"token variable\">@engine</span><span class=\"token punctuation\">.</span>refill\n    <span class=\"token variable\">@body</span><span class=\"token punctuation\">.</span>load\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>이제 우리는 컨셉에 맞는 구현을 한 뒤에 <code class=\"language-text\">Vehicle</code> 객체에 주입하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ElectricEngine</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 전지를 충전한다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PetrolEngine</span>\n  <span class=\"token keyword\">def</span> refill\n    <span class=\"token comment\"># 연료를 채운다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TruckBody</span>\n  <span class=\"token keyword\">def</span> load\n    <span class=\"token comment\"># 화물을 싣는다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CarBody</span>\n  <span class=\"token keyword\">def</span> load\n    <span class=\"token comment\"># 승객을 싣는다</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>마지막으로 모두 한 곳에 넣으면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">petrol_car <span class=\"token operator\">=</span> <span class=\"token constant\">Vehicle</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">:</span> <span class=\"token constant\">PetrolEngine</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">:</span> <span class=\"token constant\">CarBody</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>\nelectric_car <span class=\"token operator\">=</span> <span class=\"token constant\">Vehicle</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">:</span> <span class=\"token constant\">ElectricEngine</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">:</span> <span class=\"token constant\">CarBody</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>\npetrol_truck <span class=\"token operator\">=</span> <span class=\"token constant\">Vehicle</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">:</span> <span class=\"token constant\">PetrolEngine</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">:</span> <span class=\"token constant\">TruckBody</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>\nelectric_truck <span class=\"token operator\">=</span> <span class=\"token constant\">Vehicle</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>engine<span class=\"token punctuation\">:</span> <span class=\"token constant\">ElectricEngine</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">:</span> <span class=\"token constant\">TruckBody</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 접근방식은 많은 이점이 있습니다. <code class=\"language-text\">Vehicle</code> 클래스가 외부 로직을 사용하는 방식은 첫 눈에 명확하게 들어옵니다. 이름이 꼬이는 문제도 없습니다. 각각의 클래스는 정확히 한 가지 일을 하고 있습니다(<a href=\"https://ko.wikipedia.org/wiki/%EB%8B%A8%EC%9D%BC_%EC%B1%85%EC%9E%84_%EC%9B%90%EC%B9%99\">단일 책임 원칙</a>을 만족합니다). 그래서 이 클래스들이 자신에게 주어진 일을 얼마나 제대로 하는지 확인하는 테스트를 쉽게 할 수 있습니다.</p>\n<p>우리는 높은 응집력(관련있는 로직을 같이 두는 것)을 달성하면서 동시에 결합도(클래스의 의존성을 낮게 만드는 것)는 낮추었습니다. 이제 인터페이스 전체를 바꾸지 않는 한, 고객의 요구에 걱정하지 않고 코드에 사용되는 엔진이나 몸체를 바꿀 수 있습니다.</p>\n<p>조합 기법에도 문제점이 있을까요? 물론 있습니다. 이 방식은 코드를 더 길게 쓰도록 합니다. 특히 모든 의존성들을 최종 객체에 주입하게 될 때 눈에 띄게 길어집니다. 여러분은 추가적인 보일러플레이트(여기서는 코드를 생산해내는 템플릿 함수)를 만들어서 참조 위치를 저장하고, 어디에 위임을 할지 설정하며 정확한 실행 흐름을 제어할 수 있도록 만들어야 합니다. 문제의 처방전으로 여러분은 여러 가지 <a href=\"https://en.wikipedia.org/wiki/Creational_pattern\">제작 패턴</a>을 활용할 수 있습니다. 팩토리(Factory)나 빌더(Builder) 처럼요.</p>\n<p>제가 조합을 활용하려고 할 때 제일 어려웠던 점은 제 사고 방식을 조합을 응용하기에 알맞는 방식으로 고치는 것이었습니다. 예상밖으로 <strong>Go</strong> 언어를 가지고 놀 때 많은 도움을 받았습니다. 이 프로그래밍 언어는 상속을 받지 않도록 설계되어 있지만 객체지향 방식으로 코드를 작성할 수 있게 되어있습니다. 또한 프로그래머들에게 조합을 사용하도록 권장하는 기능들이 담겨있습니다. (역주: <a href=\"http://hackthology.com/object-oriented-inheritance-in-go.html\">이 글</a>이 Go 언어에서 조합을 사용하는 예를 보여주는 좋은 글로 보입니다) 제가 Go를 조금 가지고 놀다가 갑자기 조합을 사용하는데 훨씬 익숙해졌다는 사실을 깨달았습니다. 다음 포스팅에 이 이야기를 자세히 쓰고자 합니다.</p>\n<h2 id=\"결론\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>저는 여러분께 코드를 구축하는 세 가지 다른 접근 방식을 보여드렸습니다. 상속, 믹스인, 조합 말씀입니다. <strong>상속</strong>은 많은 프로그래머들의 첫 번째 선택지이지만, 저에게는 심하게 과용되고 코드를 복잡하게 만드는데다 유지보수도 힘들게 만들었습니다. <strong>믹스인</strong>은 더 똑똑하고 강력한 대체제로 보이지만 사실은 다중 상속의 한 방법에 불과하고 코드의 복잡도를 늘릴 수도 있습니다. <strong>조합</strong>은 코드 양은 제일 길어지겠지만 클래스 사이에 의존성을 관리하는데 가장 직관적이며 깔끔한 접근방식을 가지고 있습니다. 조합은 코드를 작고 분리된 조각으로 유지하며 테스트하기도 쉽습니다. 그래서 제가 가장 선호하는 방법입니다.</p>\n<p>객체 지향 프로그래밍은 일부 프로그래머들이 다른 프로그래머들이 처한 문제를 조금 더 쉽게 해결하도록 돕고자 만든 하나의 협약에 지나지 않는다는 점을 잊으시면 안됩니다. 규약에 얽매이지 마세요. 여러분이 처한 상황에 가장 잘 맞는 해결책을 선택하세요.</p>\n<p>그리고 마지막으로, 이 말을 새겨두시기 바랍니다.</p>\n<blockquote>\n<p>객체 지향 소프트웨어를 설계하는 일은 어렵다. 그리고 재사용 가능한 객체 지향 소프트웨어를 설계하는 일은 훨씬 더 어렵다. - Gang of Four</p>\n</blockquote>\n<p>이 말을 경험을 통해 알게 되실 겁니다.</p>\n<h2 id=\"원문의-참고-자료\"><a href=\"#%EC%9B%90%EB%AC%B8%EC%9D%98-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원문의 참고 자료</h2>\n<ul>\n<li>RailsConf 2015 - Nothing is Something</li>\n<li><a href=\"https://learnrubythehardway.org/book/ex44.html\">https://learnrubythehardway.org/book/ex44.html</a></li>\n<li><a href=\"https://robots.thoughtbot.com/reusable-oo-inheritance\">https://robots.thoughtbot.com/reusable-oo-inheritance</a></li>\n<li><a href=\"https://www.thoughtworks.com/insights/blog/composition-vs-inheritance-how-choose\">https://www.thoughtworks.com/insights/blog/composition-vs-inheritance-how-choose</a></li>\n</ul>\n<hr>\n<h2 id=\"번역-후기\"><a href=\"#%EB%B2%88%EC%97%AD-%ED%9B%84%EA%B8%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역 후기</h2>\n<p>어느정도 일상과 공부와 번역 등의 밸런스가 틀이 잡혀가면서 한달에 한 개 정도 포스팅하는 방향으로 굳어지고 있나봅니다. 적어도 한달에 두어개는 작성하고 싶은데.. 좋은 글은 매일 탐독하고 있지만 제대로 써먹지 못하면서 알려봤자 뭐가 좋나? 라는 생각이 들 때도 있습니다.</p>\n<p>이전에 의존성 주입에 관한 글을 번역했을 때도 그렇지만 조합 패턴은 루비를 사용하면서, 혹은 자바스크립트를 사용하면서도 아주 중요한 패턴 중 하나라고 생각합니다. 반드시 자유자재로 다루고 싶은 패턴이긴 한데 '평범하게' 레일즈를 사용하게 되면 아마 쉽게 익숙해지긴 힘든 패턴이라 생각합니다. 그래서 개인적으로 루비로 API 백엔드를 구축하는 토이 프로젝트를 하시게 된다면 하나미(hanamirb)를 이용해서 만들어보시는걸 강력하게 권장하고 싶습니다. 레일즈는 구조 특성상 이런 형태의 조합을 사용하기 쉽지 않다고 생각하기 때문입니다. (<code class=\"language-text\">ActiveSupport::Concern</code>, <code class=\"language-text\">Single Inheritance Table</code> 등)</p>\n<p>자바스크립트에서 조합을 사용하는 것을 권장하는 글도 최근에 읽고 큰 감명을 받았는데, 한번 살펴보시길 권하면서 링크를 남깁니다.</p>\n<ul>\n<li><a href=\"https://developers.caffeina.com/object-composition-patterns-in-javascript-4853898bb9d0\">https://developers.caffeina.com/object-composition-patterns-in-javascript-4853898bb9d0</a></li>\n<li><a href=\"https://medium.com/javascript-scene/the-two-pillars-of-javascript-ee6f3281e7f3\">https://medium.com/javascript-scene/the-two-pillars-of-javascript-ee6f3281e7f3</a></li>\n</ul>","id":"28f4aa8b-3143-5be0-80bb-e0600823a216","frontmatter":{"date":"2017-07-16","path":"/posts/how-to-avoid-inheritance-in-ruby-kor","title":"[번역] 루비에서 상속을 피하는 방법","tags":["Ruby","OOP","Translation"],"category":"Translation"}},{"excerpt":"이 포스팅은  Piotr Solnica 의  글 을 번역한 것입니다 번역 내용에 대한 조언 및 의견은 언제나 작성자에게 큰 도움이 됩니다 저는 우리 루비스트들이 의존성 주입(Dependency Injection)에 대해 요즘은 어떻게 생각하는지 궁금해졌습니다. 제가 기억하는 한 의존성 주입에 대한 몇몇 토론은 대부분 자바로 인해 굳혀진 개념(post-java-trauma…","html":"<ul>\n<li><strong>이 포스팅은 <a href=\"https://twitter.com/_solnic_\">Piotr Solnica</a>의 <a href=\"http://solnic.eu/2013/12/17/the-world-needs-another-post-about-dependency-injection-in-ruby.html\">글</a>을 번역한 것입니다</strong></li>\n<li><strong>번역 내용에 대한 조언 및 의견은 언제나 작성자에게 큰 도움이 됩니다</strong></li>\n</ul>\n<hr>\n<p>저는 우리 루비스트들이 의존성 주입(Dependency Injection)에 대해 요즘은 어떻게 생각하는지 궁금해졌습니다. 제가 기억하는 한 의존성 주입에 대한 몇몇 토론은 대부분 자바로 인해 굳혀진 개념(post-java-trauma)을 비판하는 내용이었습니다. 이 글을 작성하기까지 오랜 시간동안 머리속으로 생각만 하고 있었지만, 이 주제가 아마도.. 알려져 있다는 것을 알고 있었습니다. 그래서 글을 작성하기 전에 구글에 검색을 해 보기로 마음먹었지요. 구글에 \"ruby dependency injection\"을 입력하면 이런 결과를 얻었습니다:</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 580px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.13793103448276%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVQ4y3VTiZKiQAzl//dr9jdmBl3EW+5DkQZUoLnxbRodC8exq14lXZCXl3QiGXYIe7eB5TgIggCmacGyLDiuC9dxkWUZ8jwf8NNP0wxVkUHzU/z5e4K8iSHlvMT5nOKScZR5Nvx4uaSDFSjLElVVDajrergLNE0zoOtaXPIGslEiPFWQMDodC9EJAgpsmxZt2z4IBKEgKIpiwPV6HWLu5nEk8aEnCNvUQsUtsG2FgpoUdHh3rvc4ga4nHoL0/UGcvRthO3dhbn1oKw++zaiP1FfDg771sFu7CI8JeFWAF5xI+pck0ncGcSzLgDyRoagK1IWK5WoJzdhBXZG/XWK5EXcNtmuDxRE450LOk9InwjQtwViKJM4JHDFZnnfUCjxAb/BS9riZT4RihCaqieXag6wYUBY2pnT/t9DJ1yHPNlgbNFa+iQM7PPp7Hb3MD4VnRFGIJGGkNCAcSWWIYxggDA/Y773BT7N0mEXxeOPHeSFkUY7FmsGwEhr0E0z7BM2M4e85DX2NiDVw7AKWWVDykborficMKPuOHsEjJZq5g+la0G2dElCJB6FwjziJiUwMfor23tC3JV9OOY5+jDik0oMzjl6C0E9w8CL4TojAjwb/nGRIWAaeVqOSfyF0XR/qfIX5fInpdAZVIX+2hqIs8Pk1wcenjC95itV6A1N3kERnMTTve5jTLjNavyhiNxszlDTEFaEsaZh5PmxS33cU09OG9aMVvNn/HCEucTH4uRcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"2017 02 04 sc1\"\n        title=\"\"\n        src=\"/static/2017-02-04-sc1-9dcb9be1a8d06e20a0c943b7fe6c9637-9c10f.png\"\n        srcset=\"/static/2017-02-04-sc1-9dcb9be1a8d06e20a0c943b7fe6c9637-0ca6d.png 198w,\n/static/2017-02-04-sc1-9dcb9be1a8d06e20a0c943b7fe6c9637-45e8e.png 395w,\n/static/2017-02-04-sc1-9dcb9be1a8d06e20a0c943b7fe6c9637-9c10f.png 580w\"\n        sizes=\"(max-width: 580px) 100vw, 580px\"\n      />\n    </span>\n  </span>\n  </p>\n<p><em>역주: 이 글은 2013년 12월에 작성되었으며, 현재 같은 검색어로 검색하면 결과물의 순서 및 노출되는 글이 다릅니다.</em></p>\n<p>저는 <a href=\"http://david.heinemeierhansson.com/2012/dependency-injection-is-not-a-virtue.html\">DHH(David Heinmeier Hansson, Ruby on Rails의 창시자)의 블로그</a>로 들어가 글을 다시 읽어보았습니다. 그 글에 대해 희미한 기억만 남아있었기 때문입니다. 그리고 나서야 저는 세상이 루비의 의존성 주입에 대한 다른 글이 필요하다는 것을 깨달았습니다. 왜 그럴까요? 대개 저 글을 읽고 많은 루비스트들이 루비의 의존성 주입에 대해 잘못된 인식을 가질 우려가 있기 때문입니다. 또한 의존성 주입이 뭔지 배워보고자 하는 사람들은 DHH의 블로그 글을 발견할테고, 루비에서의 의존성 주입이 \"필요 없다\" 라는 크게 잘못된 생각을 가질 수 있습니다. 네, 정말로 걱정되는 부분입니다.</p>\n<p>제가 이 글의 제목을 \"루비의 의존성 주입\"이라고 작성한 이유는 <strong>\"루비의\"</strong> 라는 부분이 꽤 중요하기 때문입니다. 루비의 의존성 주입은 아주 직관적인 실체를 가지고 있으며 여러가지 장점을 가지고 있습니다.</p>\n<p>아, 간단히 정리하자면:</p>\n<p>여러분은 루비의 의존성 주입을 사용하기 위해 어떠한 외부 라이브러리도 쓸 필요가 없습니다.</p>\n<p>여러분은 루비의 의존성 주입을 사용하기 위해 어떠한 설정도 할 필요가 없습니다.</p>\n<p>여러분은 루비의 의존성 주입을 사용하기 위해 코드의 단순함을 희생할 필요가 없습니다.</p>\n<p>여러분은 루비의 의존성 주입을 사용하기 위해 코드를 더 작성해야 할 필요가 없습니다.</p>\n<h2 id=\"루비의-의존성-주입은-아주-쉽다\"><a href=\"#%EB%A3%A8%EB%B9%84%EC%9D%98-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85%EC%9D%80-%EC%95%84%EC%A3%BC-%EC%89%BD%EB%8B%A4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>루비의 의존성 주입은 아주 쉽다</h2>\n<p>별로 대단한 건 없어요. 정말로요. 하지만 당신의 코드에 큰 영향을 줍니다. 자신만의 의존성을 갖는 객체를 만드는 것 보다 객체에 의존성을 주입 할 때 유연성은 증가하고 결합도는 낮아집니다. 더 나은 디자인을 채용하게 된 덤으로 테스트 하기도 쉬워지지요. 자주 일어나는 일입니다.</p>\n<p>한번 살펴보시죠:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># 일반적인 접근</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Hacker</span>\n\n  <span class=\"token keyword\">def</span> initialize\n    <span class=\"token variable\">@keyboard</span> <span class=\"token operator\">=</span> <span class=\"token constant\">Keyboard</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token symbol\">:layout</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'us'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token comment\"># stuff</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token comment\"># 그리고 의존성 주입의 경우</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Hacker</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>keyboard<span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@keyboard</span> <span class=\"token operator\">=</span> keyboard\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token comment\"># stuff</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>우리가 뭔가 멋진 의존성 주입 라이브러리를 사용했나요? 아니죠. 우리가 코드를 더 작성했나요? 글쎄요. 아니면 코드가 더 복잡해졌나요? 확실히 아닙니다.</p>\n<p>작은 변화에 불과했지만 여러분의 코드에 <strong>큰 영향을 미칩니다.</strong> <code class=\"language-text\">Hacker</code> 클래스는 더 이상 키보드를 만드는 방법에 종속될 필요가 없습니다. 그저 주어진 인터페이스를 사용하게 될 뿐이며, 우리는 키보드 인터페이스를 구현하기만 하면 어떤 것이든 편하게 집어넣을 수 있게 되었습니다. 이게 유연성이 증가하고 결합도가 낮아진다는 것을 뜻합니다.</p>\n<p>다 좋은데 그렇다면 키보드의 의존성은 어디서 만들어야 할까요? 분명 어디선가 만들어져야 할 텐데요?</p>\n<p>제가 사용하는 패턴은 이렇습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hacker</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>layout <span class=\"token operator\">=</span> <span class=\"token string\">'us'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token constant\">Keyboard</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token symbol\">:layout</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> layout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>keyboard<span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@keyboard</span> <span class=\"token operator\">=</span> keyboard\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token comment\"># stuff</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>잠깐만요, 제가 코드를 더 작성하지 않아도 된다고 했나요? 제가 거짓말을 했네요. <code class=\"language-text\">build</code> 메서드를 쓰기 위해 코드를 두 줄 정도 더 써버렸습니다. 들켰네요.</p>\n<p>그래도 일단 좋은 면만 보도록 합시다:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># 우리는 hacker 인스턴스를 아주 작은 노력으로 만들 수 있습니다</span>\n<span class=\"token constant\">Hacker</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token string\">'us'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 만약 우리가 이미 키보드 객체를 가지고 있다면 이 방식으로도 작동합니다</span>\n<span class=\"token constant\">Hacker</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>keyboard_we_already_had<span class=\"token punctuation\">)</span></code></pre></div>\n<p>우리가 의존성을 명시적으로 드러냈기 때문에 테스트하기도 쉬워졌습니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">describe <span class=\"token constant\">Hacker</span> <span class=\"token keyword\">do</span>\n  <span class=\"token comment\"># 여기서는 키보드 객체가 큰 의존성을 가지고 있어서 그냥 mock으로 만든다고 칩시다</span>\n  <span class=\"token function\">let</span><span class=\"token punctuation\">(</span><span class=\"token symbol\">:keyboard</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keyboard'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n  it <span class=\"token string\">'writes awesome ruby code'</span> <span class=\"token keyword\">do</span>\n    hacker <span class=\"token operator\">=</span> <span class=\"token constant\">Hacker</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>keyboard<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># some expectations</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>의존성 주입이 없었다면 어떤 모양으로 보일 지 생각해봅시다. 제가 끔찍한 예를 하나 들어보겠습니다. 그리고 저는 여전히 사람들이 이런 코드를 작성하는 것을 보곤 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">describe <span class=\"token constant\">Hacker</span> <span class=\"token keyword\">do</span>\n  <span class=\"token function\">let</span><span class=\"token punctuation\">(</span><span class=\"token symbol\">:keyboard</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keyboard'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n  it <span class=\"token string\">'writes awesome ruby code'</span> <span class=\"token keyword\">do</span>\n\t<span class=\"token comment\"># 우웩!</span>\n    <span class=\"token constant\">Keyboard</span><span class=\"token punctuation\">.</span><span class=\"token function\">should_receive</span><span class=\"token punctuation\">(</span><span class=\"token symbol\">:new</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n      <span class=\"token function\">with</span><span class=\"token punctuation\">(</span><span class=\"token symbol\">:layout</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'us'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n      <span class=\"token function\">and_return</span><span class=\"token punctuation\">(</span>keyboard<span class=\"token punctuation\">)</span>\n\n    hacker <span class=\"token operator\">=</span> <span class=\"token constant\">Hacker</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span>\n\n    <span class=\"token comment\"># some expectations</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p><em>역주: 윗부분에서 <code class=\"language-text\">Hacker</code> 클래스를 의존성 주입 없이 사용하는 예를 살펴보시면 ,<code class=\"language-text\">Hacker</code> 클래스의 인스턴스를 작성할 때 동시에 <code class=\"language-text\">Keyboard</code> 클래스의 인스턴스를 만든다는 것을 볼 수 있습니다. 그래서 <code class=\"language-text\">keyboard</code> 라는 객체가 의도대로 생성되는지를 테스트하기 위해 이런 복잡한 코드가 들어가게 되었다고 생각합니다.</em></p>\n<h2 id=\"더-나아가서\"><a href=\"#%EB%8D%94-%EB%82%98%EC%95%84%EA%B0%80%EC%84%9C\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>더 나아가서</h2>\n<p>루비의 의존성 주입을 연습할 때 저는 몇몇 작은 패턴과 규칙을 정해놓고 따르고 있습니다.</p>\n<ul>\n<li><code class=\"language-text\">.new</code> 메서드를 깔끔하게 유지하고, 오버라이드 하지 말 것. 단순한 의존성만 인자로 받아들인다</li>\n<li>빌더 메서드를 분리하여 만들고 이 메서드가 \"모양빠지는\" 입력들을 받아서, 해당 클래스의 객체가 필요로 하는 모든 것을 만들 수 있게한다</li>\n<li>빌더 메서드가 너무 복잡해지게 되면 빌드 로직을 서로 다른 객체로 분리한다</li>\n<li>생성자에 옵션 해시를 전달하는 것을 피한다</li>\n</ul>\n<p>이 규칙들은 제가 작성하는 코드에 크게 긍정적인 영향을 주었습니다. 결합도를 낮추었고, 유연성을 높였으며, 리팩토링도 쉬워졌습니다.</p>\n<p>사실 제가 이 글을 통해 작성한 간단한 예제만으로 위의 규칙이 말이 된다고 설득하는 것은 어렵습니다. 그러므로 일단 루비의 의존성 주입을 사용해보라고 권하고 싶습니다. 의존성 주입을 사용하는게 단순히 테스트할 때 이득을 보기 위해서라고 여기지 말아주세요. 제발요 :)</p>\n<p>제가 말하고 싶은 것은 루비의 의존성 주입은 하나의 미덕이라는 점입니다. 루비는 복잡한 일들을 간단한 방법으로 구현할 수 있는 아름다운 언어입니다. 반면에 테스트 할 때 <code class=\"language-text\">Time.now</code> 에 <code class=\"language-text\">stub</code> 을 사용하는 것은 그렇게 영리한 방법은 아닙니다.<em>(역주: <code class=\"language-text\">stub</code> 메서드는 Rspec에서 일종의 객체 목업을 생성해주는 메서드로 알고 있습니다. 굳이 글쓴이가 <code class=\"language-text\">Time.now</code> 에 <code class=\"language-text\">stub</code> 메서드를 사용한다는 이야기를 꺼낸 것은 이 예시가 DHH의 포스트에 언급되어 있기 때문입니다.)</em></p>\n<p>물론 여러분이 루비의 의존성 주입을 사용하지 않을 수도 있지만, 실제로 사용해 보시면 더 깔끔하고 명시적인 코드를 작성하실 수 있습니다. 여러분의 코드는 더 좋아질 겁니다.</p>\n<h2 id=\"번역-후기\"><a href=\"#%EB%B2%88%EC%97%AD-%ED%9B%84%EA%B8%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역 후기</h2>\n<p>저는 언제나 기본적인 컴퓨터 과학 및 좋은 프로그래밍 방법론에 대한 지식이 부족하다는 점을 통감하고 있습니다. 단순히 전공자가 아니기 때문인 것도 있지만, 지속적으로 개발을 제대로 하려면 이러한 지식이 반드시 필요하다고 생각하고 있기 때문입니다. 이런 점에서 최근에 좀 더 알아보고 싶던 주제가 '의존성 주입' 입니다.</p>\n<p>자바 스프링 프레임워크를 사용할 때 주로 '의존성 주입' 이라는 단어가 많이 나왔을겁니다. 그런데 제가 제대로 쓸 수 있는(정말일까?) 유일한 언어인 루비는 어떻게 의존성 주입을 사용하는지 궁금하여 찾아보다 이 글을 발견하게 되었습니다.</p>\n<p>번역 과정 자체는 무난했는데 후반부에 \"Stub Time.now\" 라는 말의 뜻을 이해하지 못하겠더군요. 알고보니 두 가지 문제가 있었습니다.</p>\n<ol>\n<li>RSpec을 제대로 써 보지 않았다</li>\n<li>DHH의 글을 먼저 읽어보지 않았다</li>\n</ol>\n<p>글 작성자에게 더 자세한 설명을 부탁했더니 이런 답변을 받았습니다. 참고하시기 바랍니다.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 790px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 94.36619718309859%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACa0lEQVQ4y3WUSY7bQAxFfaoE2TSycLctz7Ykz5ItWZ4yLAIEyKKBIAfIKifITRk+uijIcGdBsarE+kV+/qrWcj6Xn6+vslosZDoeSxrHskhTSdTHs5kkapPRSPpRJINe78FY538Sz2TY70sr225lk8Yym0wkzzJJk8SA3QgmMOp0pNft1t6N+WgwsP0c0GLx49OTdF9eZL1cylwBxwpCwHg4NEAHj6dTy5gx//nHGnOADZAPJ+C3m41cLxepylJOx6NZdSjloHPWL6dTbdfzWc4hhiRIrAZ0fsr9Xs4aXB0OBsqGi27MoWW1Mp7hnEoYQxcZdp6faz5rQIxNgJJpsdvJLs9lp7wuFKRZCQav7BkpLZTs87sMOXW7XkumgJ7RhrlmUuhBZMo4b87D4VPllLLvAPmZhw1k5pvxlMl/DtmHzKmGKvZUo/M7DkmZQBrAifCIZ+2oYzYBgIfnt9Tw0BQvGaAbh9ktG7IInv9lUVjJNAhg1hjXHLqR1efr1QIokSCMm+NzdIg3EE3gARAiETUTbgnNYMwaYsUYu/kcqTTXah2mo0j+/vmt/BTGB2Wb3oInA/hFHuNgyMfG4VqiRWINcBFP5NePb7aRLh6UH+xYVXJS40bQlE96UxA66zTHGwS3ANUZ9rqRtNttK3Ot5RKAsJGBd9bGKEAPQkbcIjj1cpsvUYsJfOAh18XqmgQMceMpy8HzoEOsCNlaU7g2XHx4gEO6yJvY9MQ4f/6kufbsLQzvpmWIpr5//XKTSLgF9oypVADE2ARHZODvoN9/SqY5xNkDy+KH9++MD7ijBE5vPqT/e62br7bH/QPWe/MwJaRjfAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"2017 02 04 sc2\"\n        title=\"\"\n        src=\"/static/2017-02-04-sc2-0f2ed11f15088cd9b3c54a8078fb8ed1-ffc88.png\"\n        srcset=\"/static/2017-02-04-sc2-0f2ed11f15088cd9b3c54a8078fb8ed1-d16f8.png 198w,\n/static/2017-02-04-sc2-0f2ed11f15088cd9b3c54a8078fb8ed1-f21b1.png 395w,\n/static/2017-02-04-sc2-0f2ed11f15088cd9b3c54a8078fb8ed1-ffc88.png 790w,\n/static/2017-02-04-sc2-0f2ed11f15088cd9b3c54a8078fb8ed1-ee9f1.png 994w\"\n        sizes=\"(max-width: 790px) 100vw, 790px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>루비의 의존성 주입에 대한 이야기는 <a href=\"http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=49317754\">루비로 배우는 객체지향 디자인</a> 책에도 조금 설명되어 있습니다. 루비로 프로그래밍을 하신다면 두번 이상은 읽어보시길 추천드립니다.</p>\n<p>참고 링크:</p>\n<ul>\n<li><a href=\"http://www.slideshare.net/hnki0104/ss-42101768\">주니어 개발자도 이해할 수 있는 의존성 주입</a></li>\n<li><a href=\"https://medium.com/@Bakku1505/introduction-to-dependency-injection-in-ruby-dc238655a278#.ywoosbc3h\">Introduction to dependency injection in Ruby</a></li>\n<li><a href=\"http://david.heinemeierhansson.com/2012/dependency-injection-is-not-a-virtue.html\">Dependency injection is not a virtue</a></li>\n</ul>","id":"eb4d4bf2-461a-5920-a5ad-6760f603e04c","frontmatter":{"date":"2017-02-04","path":"/posts/the-world-needs-another-post-about-dependency-injection-in-ruby-kor","title":"[번역] 세상은 루비의 의존성 주입에 대한 다른 글을 원한다","tags":["Ruby","OOP","Translation"],"category":"Translation"}},{"excerpt":"이 포스팅은  Luca Guidi의 포스팅 을 번역한 글입니다 오역이나 잘못된 표현 지적은 언제나 환영합니다 객체 지향 프로그래밍, 인터페이스, 동적 타입에 대한 짧은 이야기 역주: 이 글은 가상의 이야기를 기반으로 객체 지향의 개념을 일부 짚어주는 글입니다 '루비 3'는 아직 개발 중이며, 어떤 형태로 나오게 될 지 모릅니다. 오늘은 주식회사 활빈당(Spectacular Foo Ltd…","html":"<ul>\n<li><strong>이 포스팅은 <a href=\"https://lucaguidi.com/2016/06/07/the-penguin-that-cannot-fly.html\">Luca Guidi의 포스팅</a>을 번역한 글입니다</strong></li>\n<li><strong>오역이나 잘못된 표현 지적은 언제나 환영합니다</strong></li>\n</ul>\n<hr>\n<h2 id=\"객체-지향-프로그래밍-인터페이스-동적-타입에-대한-짧은-이야기\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%8F%99%EC%A0%81-%ED%83%80%EC%9E%85%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A7%A7%EC%9D%80-%EC%9D%B4%EC%95%BC%EA%B8%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 지향 프로그래밍, 인터페이스, 동적 타입에 대한 짧은 이야기</h2>\n<p><em>역주: 이 글은 가상의 이야기를 기반으로 객체 지향의 개념을 일부 짚어주는 글입니다 '루비 3'는 아직 개발 중이며, 어떤 형태로 나오게 될 지 모릅니다.</em></p>\n<p>오늘은 주식회사 활빈당(Spectacular Foo Ltd. <em>역주: 보통 임의의 사람 이름을 홍길동이라고 하다 보니 임의의 회사 이름은 무엇으로 할까 하다가...</em>)의 본사에서 일어나는 일을 이야기해보고자 한다. 이 회사는 인디 게임계에서 떠오르고 있는 회사이고, 다음 블록버스터 타이틀인 <em>흔해빠진 새들(Banal Birds)</em> 의 발매를 앞두고 있다.</p>\n<p>올해는 2019년이고, 루비 3는 세배나 빠르고, 놀랍게도 모든 문제를 해결할 수 있는 동적 타입을 가지고 있다! 조금 향수에 젖은 결정이긴 하지만 당신은 리드 개발자로서 루비를 이 프로젝트에 사용하기로 결정했다.</p>\n<p>당신은 관리자인 제인에게 최종 코드 리뷰를 부탁했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Game</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>bird<span class=\"token punctuation\">:</span> <span class=\"token constant\">Bird</span><span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@bird</span> <span class=\"token operator\">=</span> bird\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> play\n    <span class=\"token variable\">@bird</span><span class=\"token punctuation\">.</span>fly\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>아이디어는 간단하지만 혁명적이었다: 플레이어는 <strong>어떤</strong> 종류의 새라도 고를 수 있고 그 새가 날아가는 것을 볼 수 있다. 이건 엄청날거야!(This is gonna be kickass!)</p>\n<p>당신은 유명한 루비 젬 <code class=\"language-text\">acts_as_a_bird</code>(새처럼 행동하라)를 재사용했다. 이 젬은 <code class=\"language-text\">Bird</code> 를 완벽하게 구현하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Bird</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>많은 새들 가운데서 우리는 올빼미나 벌새도 구현했다:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Owl</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Bird</span>\n  <span class=\"token keyword\">def</span> fly\n    puts <span class=\"token string\">\"I'm a flying owl\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Hummingbird</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Bird</span>\n  <span class=\"token keyword\">def</span> fly\n    puts <span class=\"token string\">\"I'm a flying hummingbird\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>소프트웨어 공학의 참으로 놀라운 부분 아닌가? 글쎄, 이 게임에 엄청난 투자를 했음에도 불구하고 문제가 하나 남아있었다: 제인이 '그러면 펭귄은요?' 라고 물었다. 그렇다, 펭귄은 새지만 날 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Penguin</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Bird</span>\n  <span class=\"token comment\"># LOL I'm a penguin (ㅋㅋㅋ 난 펭귄인데?)</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>오늘은 게임 발매 당일이고 당신은 버그를 수정하기 위한 여력이 없다. 그래도 발매는 되어야 한다(The show must go on). 그래서 당신은 게임을 발매하고 사용자들이 펭귄을 고르지 않기를 기도할 수 밖에 없다.</p>\n<p>당신은 기분이 별로다. 그리고 자기 자신에게 묻기 시작한다: <em>왜 내가 루비를 골랐지? 왜 동적 타입을 쓴걸까?</em></p>\n<p>제인은 \"당신이 정말 사용해야 했던 것은 타입이 아니라 인터페이스에요.\" 라고 말했다. 당신은 그 말을 듣자마자 \"맙소사, 자바 말인가요!?(OMG, Java!)\"  라고 말했지만, 그녀는 찬찬히 시간을 들여 그 개념은 <a href=\"http://golangtutorials.blogspot.kr/2011/06/interfaces-in-go.html\">Go(GoLang)</a>에서 빌려온 것이라고 설명하였다.</p>\n<blockquote>\n<p>\"루비같이 동적 타입을 가지고 있는 언어에서, 당신이 정말 신경써야 하는 것은 <strong>행동(behavior)</strong>이에요. 당신은 객체에 <em>메세지를 보낼 수 있도록</em> 해야합니다. 그게 객체 지향 프로그래밍의 핵심이에요.\"</p>\n</blockquote>\n<p>그녀는 계속 설명했다: \"타입을 사용하는 것은, 당신이 수행하고자 하는 일보다 과하게 많은 일을 수행하려는 객체를 받아들인다는 것과 같아요. 그리고 그건 <a href=\"https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4_%EB%B6%84%EB%A6%AC_%EC%9B%90%EC%B9%99\">인터페이스 분리 원칙</a>을 무너뜨립니다.\"</p>\n<blockquote>\n<p>\"차이점은 미묘해요: 당신은 <code class=\"language-text\">Bird</code> 클래스가 <code class=\"language-text\">fly</code> 메서드에 반응할 것이라(respond to) 추측했지요. 하지만 언제나 그렇진 않아요. 대신 프로그래밍 언어 측에서<em>(역주: 문맥 상 프로그래머가 작성한 코드를 말하는 것으로 보입니다)</em> 주어진 객체가 특정 메서드(혹은 메서드의 모음)를 구현하고 있는 지 확인하는 도구를 제공해야 합니다.\"</p>\n</blockquote>\n<p>이 시점에서 당신은 충격을 받았다. 당신은 루비가 행동의 모음을 정의할 수 있는 특별한 모듈을 제공했으면 정말 좋겠다고 생각했다<em>(역주: wished라는 동사를 사용했지만 문맥상 희망하다라고 쓰기엔 딱딱해 보입니다)</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">interface <span class=\"token class-name\">Flying</span>\n  <span class=\"token keyword\">def</span> fly\n    puts <span class=\"token string\">\"I'm a flying <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span> name <span class=\"token delimiter tag\">}</span></span>\"</span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> name\n    <span class=\"token string\">\"bird\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Falcon</span>\n  include <span class=\"token constant\">Flying</span>\n\n  <span class=\"token keyword\">def</span> name\n    <span class=\"token string\">\"falcon\"</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Game</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>bird<span class=\"token punctuation\">:</span> <span class=\"token constant\">Flying</span><span class=\"token punctuation\">)</span>\n    <span class=\"token variable\">@bird</span> <span class=\"token operator\">=</span> bird\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> play\n    <span class=\"token variable\">@bird</span><span class=\"token punctuation\">.</span>fly\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>또한 가상머신(VM)이 '펭귄은 날 수 없다' 같은 당황스러운 에러를 내뿜기 전에 당신을 막아주었으면 좋겠다고 생각했다. </p>\n<hr>\n<h2 id=\"번역-후기\"><a href=\"#%EB%B2%88%EC%97%AD-%ED%9B%84%EA%B8%B0\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번역 후기</h2>\n<p>예전에 RORLAB 슬랙의 질문 채널에서 이런 내용의 대화를 주고받은 적이 있습니다.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 544px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 87.86764705882352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACtklEQVQ4y31UuY7UQBScH+Ij+Af4BH6BjJSIhBghIkICMqKVWBEgEaAVYnfYGd/3+BqP7Tk9Ll4949kDFkvtvuu96qruyYezK9hB8QXAy647vjvIt9vtcTweezzw9X3/z8Jv8uLVW3y/tH4lcfgxiuLPURR1tu0giuO+KEssFimSJNE6jCL4QYCqqh4MNIHkstlsUNcNynIJ23Hgul7v+z4cx0UYhrAsG6ZpIRbgLMt0nEEkAakXiOMEXdcNGfIngEcB6GTjsW3bXuhCmPf7vVIH68Oh0zY/9rfbLdcoEOsTZf7quobneQiEjlDWiEJZs2EWy+VS5kKdZ+ZFUSjtOI41U5buTzAFbNu1bhqjjWXss95ud9jtdtpnpvfXnjJ8/uwJvn09h2HaAtxitVqdFg1UB8ABYKg3QpfgYwDWJ8D3b17jx8UFLNtWQQzDUBEM08RsNlMxqLptD8KMQqVpqiKRWZ7nN6J4riWTiZ5RluUyWehiZspzymQxN1XVSl1AFv/z5+Tp40c4P/uE65khXlugLEoFK8WDFOuwEWpCcQygtRQKlsh6CtI0zQ2gbVyrWqZQdEVpUmV7Op2KH114lgNPaHJsPjcGXwp90myaVoPQx7eMrT7U86jLCnmaIRdbcAOz4DhtRAOPlqJ9eAxj1hTvDiDpmZbcBHrN9TXT+XyumSR+KOPRSbDLyyvNnAKxP7riDiDPiuoxGwJ7nq8bCOxSVQHlmO8HcATMkjXMkna5LcjJ2Ov1Gp7roc5KNLEoneYKVhVCK19qoOGWBPpIsLDPILw1fwPKwxDNHSycANOfVwpuGKYWX9oEvxZP0lqOUB/ABgHZ5nmPtBWQaukZ8pkSD6YiDAvVT2kPCiZBmQUNPD4SY1b3ni/oy5GomrFeftY0MSmxzcI2fUdxwjDSPQzC63gb/DfqqlBeKJlTYwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"slack_conversation\"\n        title=\"\"\n        src=\"/static/2016-12-31-sc1-a13427f93ee2f60a5107ed26df13cfdc-959a9.png\"\n        srcset=\"/static/2016-12-31-sc1-a13427f93ee2f60a5107ed26df13cfdc-5510e.png 198w,\n/static/2016-12-31-sc1-a13427f93ee2f60a5107ed26df13cfdc-f5670.png 395w,\n/static/2016-12-31-sc1-a13427f93ee2f60a5107ed26df13cfdc-959a9.png 544w\"\n        sizes=\"(max-width: 544px) 100vw, 544px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>마침 이 글을 읽은 직후라 비유를 <code class=\"language-text\">fly</code> 로 사용했었던 것이 기억나네요. 보통 동적 타입을 사용하는 언어들의 단점으로 여러가지가 거론되지만 '실행하기 전에는 무슨 일이 일어날 지 바로 알 수 없다' 라는 단점을 본 적이 있습니다.</p>\n<p>하지만 본문에서 설명한 개념으로 그런 단점을 최소화하는게 가능하겠지요. 핵심은 프로그래머가 자신의 프로그램이 어떻게 동작할지를 면밀하게 설계할 필요가 있다는 것입니다.</p>\n<p>위 개념을 조금 더 적극적으로 활용하고자 하시는 루비 프로그래머분들은 <a href=\"http://www.aladin.co.kr/shop/wproduct.aspx?ItemId=49317754\">루비로 배우는 객체지향 디자인</a>의 5, 6, 7장을 찬찬히 살펴보시면 많은 도움이 될 것입니다.</p>\n<p>2016년의 마지막 날, 이 글을 읽는 분들에게 조그마한 새해 선물이 되었이 되었으면 좋곘고 새해에도 많은 분들과 더 좋은 내용의 글을 주고받을 수 있도록 개발자로서의 역량을 갈고 닦고 싶습니다 :)</p>","id":"edaadb4a-9d65-5395-805a-5490447e3b9e","frontmatter":{"date":"2016-12-31","path":"/posts/the-penguin-that-cannot-fly-kor","title":"[번역] 펭귄은 날 수 없다(The Penguin That Can't Fly)","tags":["Ruby","OOP","Translation"],"category":"Translation"}}],"tagName":"OOP"}}